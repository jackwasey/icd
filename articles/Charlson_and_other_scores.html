<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Charlson and Van Walraven scores • Comorbidity calculations and tools for ICD-9 and ICD-10 codes</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Charlson and Van Walraven scores">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Comorbidity calculations and tools for ICD-9 and ICD-10 codes</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">3.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Charlson_and_other_scores.html">Charlson and Van Walraven scores</a>
    </li>
    <li>
      <a href="../articles/Comparing_Comorbidity_Mappings_Vignette.html">Comparing Comorbidity Mappings</a>
    </li>
    <li>
      <a href="../articles/Efficient_calculation_of_comorbidities_from_medical_codes.pdf">icd: Efficient Computation of Comorbidities from ICD Codes Using Sparse Matrix Multiplication in R (PDF)</a>
    </li>
    <li>
      <a href="../articles/Ranges.html">Ranges of ICD codes</a>
    </li>
    <li>
      <a href="../articles/Using_Hierarchical_Condition_Codes.html">Using Hierarchical Condition Codes</a>
    </li>
    <li>
      <a href="../articles/icd-10.html">ICD-10 comorbidities</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Quick Introduction to icd</a>
    </li>
    <li>
      <a href="../articles/pccc.html">Pediatric Complex Chronic Conditions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Charlson and Van Walraven scores</h1>
                        <h4 class="author">Jack O. Wasey</h4>
            
            <h4 class="date">8 May, 2018</h4>
      
      
      <div class="hidden name"><code>Charlson_and_other_scores.Rmd</code></div>

    </div>

    
    
<!--
Copyright (C) 2014 - 2018  Jack O. Wasey

This file is part of icd.

icd is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

icd is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with icd. If not, see <http:#www.gnu.org/licenses/>.
-->
<div id="icd-code-scoring-systems" class="section level2">
<h2 class="hasAnchor">
<a href="#icd-code-scoring-systems" class="anchor"></a>ICD code scoring systems</h2>
<p>A common use of ICD codes is calculation as a Charlson score, which gives a measure of how well a patient is, albeit based on the limited available in admission and discharge diagnoses. The Charlson scoring system attributes scores based on presence of diseases falling into any of the Charlson comorbidities. Quan updated the scores given to each comorbidity to better reflect morbidity and mortality in a more recent population. Van Walraven provides a similar scoring methodology for the Elixhauser comorbidities (as used by the US AHRQ).</p>
<p>More complicated scoring systems may use lab values, patient demographic information, and so on. Any contributions to this package for calculations of scoring systems based on comorbidities and other data would be welcome.</p>
</div>
<div id="vermont-example-data-charlson-scores" class="section level2">
<h2 class="hasAnchor">
<a href="#vermont-example-data-charlson-scores" class="anchor"></a>Vermont example data, Charlson scores</h2>
<p>The Vermont data are actually discharge, not admission diagnoses, but can be used to demonstrate generating Charlson scores.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">head</span>(icd.data<span class="op">::</span>vermont_dx[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>])</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">#&gt;   visit_id   age_group    sex death DRG   DX1   DX2   DX3   DX4   DX5</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">#&gt; 1        7       40-44   male  TRUE 640 27801 03842 51881 41519 99591</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt; 2       10 75 and over female FALSE 470 71526 25000 42830  4280  4019</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt; 3       13 75 and over female FALSE 470 71535 59651 78052 27800 V8537</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt; 4       16       55-59 female FALSE 470 71535 49390 53081 27800  V140</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt; 5       37       70-74   male FALSE 462 71536  4241  2859  2720  4414</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; 6       41       70-74   male FALSE 462 71536 V1259 V1582  V160  V171</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">v &lt;-<span class="st"> </span><span class="kw"><a href="../reference/wide_to_long.html">wide_to_long</a></span>(icd.data<span class="op">::</span>vermont_dx)</a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="kw">head</span>(v)</a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt;   visit_id age_group  sex death DRG icd_code</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt; 1        7     40-44 male  TRUE 640    27801</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; 2        7     40-44 male  TRUE 640    03842</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; 3        7     40-44 male  TRUE 640    51881</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt; 4        7     40-44 male  TRUE 640    41519</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt; 5        7     40-44 male  TRUE 640    99591</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt; 6        7     40-44 male  TRUE 640    42842</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="kw"><a href="../reference/charlson.html">charlson</a></span>(v) <span class="op">%&gt;%</span><span class="st"> </span>summary</a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt; codes: 27801 03842 51881 41519 99591 42842 5849 5609 6826 5853 </span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt; codeHash.keys(): 7470 70714 99670 500 340 514 03812 V270 23770 V8741 </span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co">#&gt; mat rows: 230, cols: 17</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">#&gt; 0, 0, 0, 0</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#&gt; Map matrix rows: 230, and cols: 17</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30"><span class="co">#&gt; relevantSize = 230, vlen = 10407</span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb1-32" data-line-number="32"><span class="co">#&gt; codes_cv: 27801 03842 51881 41519 99591 42842 5849 5609 6826 5853 </span></a>
<a class="sourceLine" id="cb1-33" data-line-number="33"><span class="co">#&gt; relevantKeys: 500 43820 1748 25040 42843 20280 5856 43821 4280 4940 </span></a>
<a class="sourceLine" id="cb1-34" data-line-number="34"><span class="co">#&gt; rh.keys.size() = 230</span></a>
<a class="sourceLine" id="cb1-35" data-line-number="35"><span class="co">#&gt; visits are not factors, they are: 13 but converting/assuming character. See https://cran.r-project.org/doc/manuals/r-release/R-ints.html#SEXPs</span></a>
<a class="sourceLine" id="cb1-36" data-line-number="36"><span class="co">#&gt; v: 7 7 7 7 7 7 7 7 7 7 </span></a>
<a class="sourceLine" id="cb1-37" data-line-number="37"><span class="co">#&gt; uv: 14764 24119 20906 18651 11794 12953 22536 15247 603 14569 </span></a>
<a class="sourceLine" id="cb1-38" data-line-number="38"><span class="co">#&gt; visitIds: 14764 24119 20906 18651 11794 12953 22536 15247 603 14569 </span></a>
<a class="sourceLine" id="cb1-39" data-line-number="39"><span class="co">#&gt; rows: 258 258 258 258 258 258 258 258 258 258 </span></a>
<a class="sourceLine" id="cb1-40" data-line-number="40"><span class="co">#&gt; cols: -2147483648 -2147483648 -2147483648 -2147483648 -2147483648 207 -2147483648 -2147483648 -2147483648 72 </span></a>
<a class="sourceLine" id="cb1-41" data-line-number="41"><span class="co">#&gt; n rows: 10407, n cols: 10407</span></a>
<a class="sourceLine" id="cb1-42" data-line-number="42"><span class="co">#&gt; Built visMt, rows:1000, cols: 230</span></a>
<a class="sourceLine" id="cb1-43" data-line-number="43"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb1-44" data-line-number="44"><span class="co">#&gt; 0 1 0 0</span></a>
<a class="sourceLine" id="cb1-45" data-line-number="45"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb1-46" data-line-number="46"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb1-47" data-line-number="47"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb1-48" data-line-number="48"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb1-49" data-line-number="49"><span class="co">#&gt; Result rows: 1000, cols: 17</span></a>
<a class="sourceLine" id="cb1-50" data-line-number="50"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb1-51" data-line-number="51"><span class="co">#&gt; 1, 0, 0, 0</span></a>
<a class="sourceLine" id="cb1-52" data-line-number="52"><span class="co">#&gt; Map matrix rows: 1000, and cols: 17</span></a>
<a class="sourceLine" id="cb1-53" data-line-number="53"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb1-54" data-line-number="54"><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></a>
<a class="sourceLine" id="cb1-55" data-line-number="55"><span class="co">#&gt;   0.000   0.000   1.000   1.573   2.000   9.000</span></a>
<a class="sourceLine" id="cb1-56" data-line-number="56"><span class="kw">head</span>(<span class="kw"><a href="../reference/charlson.html">charlson</a></span>(v))</a>
<a class="sourceLine" id="cb1-57" data-line-number="57"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb1-58" data-line-number="58"><span class="co">#&gt; codes: 27801 03842 51881 41519 99591 42842 5849 5609 6826 5853 </span></a>
<a class="sourceLine" id="cb1-59" data-line-number="59"><span class="co">#&gt; codeHash.keys(): 7470 70714 99670 500 340 514 03812 V270 23770 V8741 </span></a>
<a class="sourceLine" id="cb1-60" data-line-number="60"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb1-61" data-line-number="61"><span class="co">#&gt; mat rows: 230, cols: 17</span></a>
<a class="sourceLine" id="cb1-62" data-line-number="62"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb1-63" data-line-number="63"><span class="co">#&gt; 0, 0, 0, 0</span></a>
<a class="sourceLine" id="cb1-64" data-line-number="64"><span class="co">#&gt; Map matrix rows: 230, and cols: 17</span></a>
<a class="sourceLine" id="cb1-65" data-line-number="65"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb1-66" data-line-number="66"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb1-67" data-line-number="67"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb1-68" data-line-number="68"><span class="co">#&gt; relevantSize = 230, vlen = 10407</span></a>
<a class="sourceLine" id="cb1-69" data-line-number="69"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb1-70" data-line-number="70"><span class="co">#&gt; codes_cv: 27801 03842 51881 41519 99591 42842 5849 5609 6826 5853 </span></a>
<a class="sourceLine" id="cb1-71" data-line-number="71"><span class="co">#&gt; relevantKeys: 500 43820 1748 25040 42843 20280 5856 43821 4280 4940 </span></a>
<a class="sourceLine" id="cb1-72" data-line-number="72"><span class="co">#&gt; rh.keys.size() = 230</span></a>
<a class="sourceLine" id="cb1-73" data-line-number="73"><span class="co">#&gt; visits are not factors, they are: 13 but converting/assuming character. See https://cran.r-project.org/doc/manuals/r-release/R-ints.html#SEXPs</span></a>
<a class="sourceLine" id="cb1-74" data-line-number="74"><span class="co">#&gt; v: 7 7 7 7 7 7 7 7 7 7 </span></a>
<a class="sourceLine" id="cb1-75" data-line-number="75"><span class="co">#&gt; uv: 14764 24119 20906 18651 11794 12953 22536 15247 603 14569 </span></a>
<a class="sourceLine" id="cb1-76" data-line-number="76"><span class="co">#&gt; visitIds: 14764 24119 20906 18651 11794 12953 22536 15247 603 14569 </span></a>
<a class="sourceLine" id="cb1-77" data-line-number="77"><span class="co">#&gt; rows: 258 258 258 258 258 258 258 258 258 258 </span></a>
<a class="sourceLine" id="cb1-78" data-line-number="78"><span class="co">#&gt; cols: -2147483648 -2147483648 -2147483648 -2147483648 -2147483648 207 -2147483648 -2147483648 -2147483648 72 </span></a>
<a class="sourceLine" id="cb1-79" data-line-number="79"><span class="co">#&gt; n rows: 10407, n cols: 10407</span></a>
<a class="sourceLine" id="cb1-80" data-line-number="80"><span class="co">#&gt; Built visMt, rows:1000, cols: 230</span></a>
<a class="sourceLine" id="cb1-81" data-line-number="81"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb1-82" data-line-number="82"><span class="co">#&gt; 0 1 0 0</span></a>
<a class="sourceLine" id="cb1-83" data-line-number="83"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb1-84" data-line-number="84"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb1-85" data-line-number="85"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb1-86" data-line-number="86"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb1-87" data-line-number="87"><span class="co">#&gt; Result rows: 1000, cols: 17</span></a>
<a class="sourceLine" id="cb1-88" data-line-number="88"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb1-89" data-line-number="89"><span class="co">#&gt; 1, 0, 0, 0</span></a>
<a class="sourceLine" id="cb1-90" data-line-number="90"><span class="co">#&gt; Map matrix rows: 1000, and cols: 17</span></a>
<a class="sourceLine" id="cb1-91" data-line-number="91"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb1-92" data-line-number="92"><span class="co">#&gt;  7 10 13 16 37 41 </span></a>
<a class="sourceLine" id="cb1-93" data-line-number="93"><span class="co">#&gt;  5  3  0  1  1  0</span></a>
<a class="sourceLine" id="cb1-94" data-line-number="94"><span class="kw">head</span>(<span class="kw">names</span>(<span class="kw"><a href="../reference/charlson.html">charlson</a></span>(v)))</a>
<a class="sourceLine" id="cb1-95" data-line-number="95"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb1-96" data-line-number="96"><span class="co">#&gt; codes: 27801 03842 51881 41519 99591 42842 5849 5609 6826 5853 </span></a>
<a class="sourceLine" id="cb1-97" data-line-number="97"><span class="co">#&gt; codeHash.keys(): 7470 70714 99670 500 340 514 03812 V270 23770 V8741 </span></a>
<a class="sourceLine" id="cb1-98" data-line-number="98"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb1-99" data-line-number="99"><span class="co">#&gt; mat rows: 230, cols: 17</span></a>
<a class="sourceLine" id="cb1-100" data-line-number="100"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb1-101" data-line-number="101"><span class="co">#&gt; 0, 0, 0, 0</span></a>
<a class="sourceLine" id="cb1-102" data-line-number="102"><span class="co">#&gt; Map matrix rows: 230, and cols: 17</span></a>
<a class="sourceLine" id="cb1-103" data-line-number="103"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb1-104" data-line-number="104"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb1-105" data-line-number="105"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb1-106" data-line-number="106"><span class="co">#&gt; relevantSize = 230, vlen = 10407</span></a>
<a class="sourceLine" id="cb1-107" data-line-number="107"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb1-108" data-line-number="108"><span class="co">#&gt; codes_cv: 27801 03842 51881 41519 99591 42842 5849 5609 6826 5853 </span></a>
<a class="sourceLine" id="cb1-109" data-line-number="109"><span class="co">#&gt; relevantKeys: 500 43820 1748 25040 42843 20280 5856 43821 4280 4940 </span></a>
<a class="sourceLine" id="cb1-110" data-line-number="110"><span class="co">#&gt; rh.keys.size() = 230</span></a>
<a class="sourceLine" id="cb1-111" data-line-number="111"><span class="co">#&gt; visits are not factors, they are: 13 but converting/assuming character. See https://cran.r-project.org/doc/manuals/r-release/R-ints.html#SEXPs</span></a>
<a class="sourceLine" id="cb1-112" data-line-number="112"><span class="co">#&gt; v: 7 7 7 7 7 7 7 7 7 7 </span></a>
<a class="sourceLine" id="cb1-113" data-line-number="113"><span class="co">#&gt; uv: 14764 24119 20906 18651 11794 12953 22536 15247 603 14569 </span></a>
<a class="sourceLine" id="cb1-114" data-line-number="114"><span class="co">#&gt; visitIds: 14764 24119 20906 18651 11794 12953 22536 15247 603 14569 </span></a>
<a class="sourceLine" id="cb1-115" data-line-number="115"><span class="co">#&gt; rows: 258 258 258 258 258 258 258 258 258 258 </span></a>
<a class="sourceLine" id="cb1-116" data-line-number="116"><span class="co">#&gt; cols: -2147483648 -2147483648 -2147483648 -2147483648 -2147483648 207 -2147483648 -2147483648 -2147483648 72 </span></a>
<a class="sourceLine" id="cb1-117" data-line-number="117"><span class="co">#&gt; n rows: 10407, n cols: 10407</span></a>
<a class="sourceLine" id="cb1-118" data-line-number="118"><span class="co">#&gt; Built visMt, rows:1000, cols: 230</span></a>
<a class="sourceLine" id="cb1-119" data-line-number="119"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb1-120" data-line-number="120"><span class="co">#&gt; 0 1 0 0</span></a>
<a class="sourceLine" id="cb1-121" data-line-number="121"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb1-122" data-line-number="122"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb1-123" data-line-number="123"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb1-124" data-line-number="124"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb1-125" data-line-number="125"><span class="co">#&gt; Result rows: 1000, cols: 17</span></a>
<a class="sourceLine" id="cb1-126" data-line-number="126"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb1-127" data-line-number="127"><span class="co">#&gt; 1, 0, 0, 0</span></a>
<a class="sourceLine" id="cb1-128" data-line-number="128"><span class="co">#&gt; Map matrix rows: 1000, and cols: 17</span></a>
<a class="sourceLine" id="cb1-129" data-line-number="129"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb1-130" data-line-number="130"><span class="co">#&gt; [1] "7"  "10" "13" "16" "37" "41"</span></a></code></pre></div>
<p>This default result is a numeric vector with the names (top numbers) as the patient identifiers. Those who like working with ‘tidy’ data frames can use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">head</span>(<span class="kw"><a href="../reference/charlson.html">charlson</a></span>(v, <span class="dt">return_df =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; codes: 27801 03842 51881 41519 99591 42842 5849 5609 6826 5853 </span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; codeHash.keys(): 7470 70714 99670 500 340 514 03812 V270 23770 V8741 </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; mat rows: 230, cols: 17</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; 0, 0, 0, 0</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; Map matrix rows: 230, and cols: 17</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; relevantSize = 230, vlen = 10407</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; codes_cv: 27801 03842 51881 41519 99591 42842 5849 5609 6826 5853 </span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; relevantKeys: 500 43820 1748 25040 42843 20280 5856 43821 4280 4940 </span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt; rh.keys.size() = 230</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; visits are not factors, they are: 13 but converting/assuming character. See https://cran.r-project.org/doc/manuals/r-release/R-ints.html#SEXPs</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; v: 7 7 7 7 7 7 7 7 7 7 </span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; uv: 14764 24119 20906 18651 11794 12953 22536 15247 603 14569 </span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; visitIds: 14764 24119 20906 18651 11794 12953 22536 15247 603 14569 </span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; rows: 258 258 258 258 258 258 258 258 258 258 </span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; cols: -2147483648 -2147483648 -2147483648 -2147483648 -2147483648 207 -2147483648 -2147483648 -2147483648 72 </span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt; n rows: 10407, n cols: 10407</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; Built visMt, rows:1000, cols: 230</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt; 0 1 0 0</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"><span class="co">#&gt; Result rows: 1000, cols: 17</span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="co">#&gt; 1, 0, 0, 0</span></a>
<a class="sourceLine" id="cb2-35" data-line-number="35"><span class="co">#&gt; Map matrix rows: 1000, and cols: 17</span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb2-37" data-line-number="37"><span class="co">#&gt;   visit_id Charlson</span></a>
<a class="sourceLine" id="cb2-38" data-line-number="38"><span class="co">#&gt; 1        7        5</span></a>
<a class="sourceLine" id="cb2-39" data-line-number="39"><span class="co">#&gt; 2       10        3</span></a>
<a class="sourceLine" id="cb2-40" data-line-number="40"><span class="co">#&gt; 3       13        0</span></a>
<a class="sourceLine" id="cb2-41" data-line-number="41"><span class="co">#&gt; 4       16        1</span></a>
<a class="sourceLine" id="cb2-42" data-line-number="42"><span class="co">#&gt; 5       37        1</span></a>
<a class="sourceLine" id="cb2-43" data-line-number="43"><span class="co">#&gt; 6       41        0</span></a></code></pre></div>
<p>Behind the scenes, <em>icd</em> calculates the Charlson comorbidities for those ICD codes, applies the Charlson scoring system, and returns the Charlson score for each patient.</p>
</div>
<div id="vermont-example-data-van-walraven-scores" class="section level2">
<h2 class="hasAnchor">
<a href="#vermont-example-data-van-walraven-scores" class="anchor"></a>Vermont example data, Van Walraven scores</h2>
<p>The same principle can be used to calculate the Van Walraven score, which is the Charlson score counterpart for Elixhauser comorbidities.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="st">`</span><span class="dt">Vermont Van Walraven Scores</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/van_walraven.html">van_walraven</a></span>(v)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; codes: 27801 03842 51881 41519 99591 42842 5849 5609 6826 5853 </span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; codeHash.keys(): 7470 70714 99670 500 340 514 03812 V270 23770 V8741 </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; mat rows: 331, cols: 31</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 0, 0, 0, 0</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; Map matrix rows: 331, and cols: 31</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt; relevantSize = 331, vlen = 10407</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt; codes_cv: 27801 03842 51881 41519 99591 42842 5849 5609 6826 5853 </span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; relevantKeys: 500 340 1748 25040 78321 40290 34831 42843 7843 5856 </span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; rh.keys.size() = 331</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; visits are not factors, they are: 13 but converting/assuming character. See https://cran.r-project.org/doc/manuals/r-release/R-ints.html#SEXPs</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; v: 7 7 7 7 7 7 7 7 7 7 </span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt; uv: 14764 24119 20906 18651 11794 12953 22536 15247 603 14569 </span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; visitIds: 14764 24119 20906 18651 11794 12953 22536 15247 603 14569 </span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; rows: 258 258 258 258 258 258 258 258 258 258 </span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; cols: 71 -2147483648 -2147483648 288 -2147483648 315 -2147483648 -2147483648 -2147483648 186 </span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt; n rows: 10407, n cols: 10407</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt; Built visMt, rows:1000, cols: 331</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; 0 0 0 0</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; Result rows: 1000, cols: 31</span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co">#&gt; 0, 0, 0, 0</span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co">#&gt; Map matrix rows: 1000, and cols: 31</span></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb3-37" data-line-number="37"><span class="kw">hist</span>(<span class="st">`</span><span class="dt">Vermont Van Walraven Scores</span><span class="st">`</span>)</a></code></pre></div>
<p><img src="Charlson_and_other_scores_files/figure-html/vermontvanwalraven-1.png" width="700"></p>
</div>
<div id="working-with-mixed-icd-9-and-icd-10-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-mixed-icd-9-and-icd-10-codes" class="anchor"></a>Working with mixed ICD-9 and ICD-10 codes</h2>
<p>All the functions in <code>icd</code> work with one code type. They are tolerant of having different sub-types of ICD-9 or ICD-10 codes together for comorbidity calculations, but patients with mixed data can be combined. E.g. patient A has two ICD-9 and two ICD-10 codes:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">icd9 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">pts =</span> <span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"A"</span>), <span class="kw">c</span>(<span class="st">"041.04"</span>, <span class="st">"244.9"</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">icd10 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">pts =</span> <span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"A"</span>), <span class="kw">c</span>(<span class="st">"C82.28"</span>, <span class="st">"M08.979"</span>))</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">both &lt;-<span class="st"> </span><span class="kw"><a href="../reference/comorbid.html">comorbid_elix</a></span>(icd9) <span class="op">|</span><span class="st"> </span><span class="kw"><a href="../reference/comorbid.html">comorbid_elix</a></span>(icd10)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; codes: 04104 2449 </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; codeHash.keys(): 2449 04104 </span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; mat rows: 1, cols: 31</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; Map matrix rows: 1, and cols: 31</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt; relevantSize = 1, vlen = 2</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; codes_cv: 04104 2449 </span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt; relevantKeys: 2449 </span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; rh.keys.size() = 1</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt; visits are factors</span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt; rows: 1 1 </span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt; cols: -2147483648 1 </span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt; n rows: 2, n cols: 2</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt; Built visMt, rows:1, cols: 1</span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co">#&gt; 1</span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="co">#&gt; Result rows: 1, cols: 31</span></a>
<a class="sourceLine" id="cb4-29" data-line-number="29"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb4-30" data-line-number="30"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb4-31" data-line-number="31"><span class="co">#&gt; Map matrix rows: 1, and cols: 31</span></a>
<a class="sourceLine" id="cb4-32" data-line-number="32"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb4-33" data-line-number="33"><span class="co">#&gt; icd_codes: C8228 M08979 </span></a>
<a class="sourceLine" id="cb4-34" data-line-number="34"><span class="co">#&gt; i = 0, and ptCode = C8228</span></a>
<a class="sourceLine" id="cb4-35" data-line-number="35"><span class="co">#&gt; code len &gt;=3 chars</span></a>
<a class="sourceLine" id="cb4-36" data-line-number="36"><span class="co">#&gt; cmb, j = 0</span></a>
<a class="sourceLine" id="cb4-37" data-line-number="37"><span class="co">#&gt; cmb, j = 1</span></a>
<a class="sourceLine" id="cb4-38" data-line-number="38"><span class="co">#&gt; cmb, j = 2</span></a>
<a class="sourceLine" id="cb4-39" data-line-number="39"><span class="co">#&gt; cmb, j = 3</span></a>
<a class="sourceLine" id="cb4-40" data-line-number="40"><span class="co">#&gt; cmb, j = 4</span></a>
<a class="sourceLine" id="cb4-41" data-line-number="41"><span class="co">#&gt; cmb, j = 5</span></a>
<a class="sourceLine" id="cb4-42" data-line-number="42"><span class="co">#&gt; cmb, j = 6</span></a>
<a class="sourceLine" id="cb4-43" data-line-number="43"><span class="co">#&gt; cmb, j = 7</span></a>
<a class="sourceLine" id="cb4-44" data-line-number="44"><span class="co">#&gt; cmb, j = 8</span></a>
<a class="sourceLine" id="cb4-45" data-line-number="45"><span class="co">#&gt; cmb, j = 9</span></a>
<a class="sourceLine" id="cb4-46" data-line-number="46"><span class="co">#&gt; cmb, j = 10</span></a>
<a class="sourceLine" id="cb4-47" data-line-number="47"><span class="co">#&gt; cmb, j = 11</span></a>
<a class="sourceLine" id="cb4-48" data-line-number="48"><span class="co">#&gt; cmb, j = 12</span></a>
<a class="sourceLine" id="cb4-49" data-line-number="49"><span class="co">#&gt; cmb, j = 13</span></a>
<a class="sourceLine" id="cb4-50" data-line-number="50"><span class="co">#&gt; cmb, j = 14</span></a>
<a class="sourceLine" id="cb4-51" data-line-number="51"><span class="co">#&gt; cmb, j = 15</span></a>
<a class="sourceLine" id="cb4-52" data-line-number="52"><span class="co">#&gt; cmb, j = 16</span></a>
<a class="sourceLine" id="cb4-53" data-line-number="53"><span class="co">#&gt; cmb, j = 17</span></a>
<a class="sourceLine" id="cb4-54" data-line-number="54"><span class="co">#&gt; searchLen = 3</span></a>
<a class="sourceLine" id="cb4-55" data-line-number="55"><span class="co">#&gt; Going to next comorbidity</span></a>
<a class="sourceLine" id="cb4-56" data-line-number="56"><span class="co">#&gt; cmb, j = 18</span></a>
<a class="sourceLine" id="cb4-57" data-line-number="57"><span class="co">#&gt; cmb, j = 19</span></a>
<a class="sourceLine" id="cb4-58" data-line-number="58"><span class="co">#&gt; cmb, j = 20</span></a>
<a class="sourceLine" id="cb4-59" data-line-number="59"><span class="co">#&gt; cmb, j = 21</span></a>
<a class="sourceLine" id="cb4-60" data-line-number="60"><span class="co">#&gt; cmb, j = 22</span></a>
<a class="sourceLine" id="cb4-61" data-line-number="61"><span class="co">#&gt; cmb, j = 23</span></a>
<a class="sourceLine" id="cb4-62" data-line-number="62"><span class="co">#&gt; cmb, j = 24</span></a>
<a class="sourceLine" id="cb4-63" data-line-number="63"><span class="co">#&gt; cmb, j = 25</span></a>
<a class="sourceLine" id="cb4-64" data-line-number="64"><span class="co">#&gt; cmb, j = 26</span></a>
<a class="sourceLine" id="cb4-65" data-line-number="65"><span class="co">#&gt; cmb, j = 27</span></a>
<a class="sourceLine" id="cb4-66" data-line-number="66"><span class="co">#&gt; cmb, j = 28</span></a>
<a class="sourceLine" id="cb4-67" data-line-number="67"><span class="co">#&gt; cmb, j = 29</span></a>
<a class="sourceLine" id="cb4-68" data-line-number="68"><span class="co">#&gt; cmb, j = 30</span></a>
<a class="sourceLine" id="cb4-69" data-line-number="69"><span class="co">#&gt; finished a comorbidity</span></a>
<a class="sourceLine" id="cb4-70" data-line-number="70"><span class="co">#&gt; i = 1, and ptCode = M08979</span></a>
<a class="sourceLine" id="cb4-71" data-line-number="71"><span class="co">#&gt; code len &gt;=3 chars</span></a>
<a class="sourceLine" id="cb4-72" data-line-number="72"><span class="co">#&gt; cmb, j = 0</span></a>
<a class="sourceLine" id="cb4-73" data-line-number="73"><span class="co">#&gt; cmb, j = 1</span></a>
<a class="sourceLine" id="cb4-74" data-line-number="74"><span class="co">#&gt; cmb, j = 2</span></a>
<a class="sourceLine" id="cb4-75" data-line-number="75"><span class="co">#&gt; cmb, j = 3</span></a>
<a class="sourceLine" id="cb4-76" data-line-number="76"><span class="co">#&gt; cmb, j = 4</span></a>
<a class="sourceLine" id="cb4-77" data-line-number="77"><span class="co">#&gt; cmb, j = 5</span></a>
<a class="sourceLine" id="cb4-78" data-line-number="78"><span class="co">#&gt; cmb, j = 6</span></a>
<a class="sourceLine" id="cb4-79" data-line-number="79"><span class="co">#&gt; cmb, j = 7</span></a>
<a class="sourceLine" id="cb4-80" data-line-number="80"><span class="co">#&gt; cmb, j = 8</span></a>
<a class="sourceLine" id="cb4-81" data-line-number="81"><span class="co">#&gt; cmb, j = 9</span></a>
<a class="sourceLine" id="cb4-82" data-line-number="82"><span class="co">#&gt; cmb, j = 10</span></a>
<a class="sourceLine" id="cb4-83" data-line-number="83"><span class="co">#&gt; cmb, j = 11</span></a>
<a class="sourceLine" id="cb4-84" data-line-number="84"><span class="co">#&gt; cmb, j = 12</span></a>
<a class="sourceLine" id="cb4-85" data-line-number="85"><span class="co">#&gt; cmb, j = 13</span></a>
<a class="sourceLine" id="cb4-86" data-line-number="86"><span class="co">#&gt; cmb, j = 14</span></a>
<a class="sourceLine" id="cb4-87" data-line-number="87"><span class="co">#&gt; cmb, j = 15</span></a>
<a class="sourceLine" id="cb4-88" data-line-number="88"><span class="co">#&gt; cmb, j = 16</span></a>
<a class="sourceLine" id="cb4-89" data-line-number="89"><span class="co">#&gt; cmb, j = 17</span></a>
<a class="sourceLine" id="cb4-90" data-line-number="90"><span class="co">#&gt; cmb, j = 18</span></a>
<a class="sourceLine" id="cb4-91" data-line-number="91"><span class="co">#&gt; cmb, j = 19</span></a>
<a class="sourceLine" id="cb4-92" data-line-number="92"><span class="co">#&gt; cmb, j = 20</span></a>
<a class="sourceLine" id="cb4-93" data-line-number="93"><span class="co">#&gt; searchLen = 3</span></a>
<a class="sourceLine" id="cb4-94" data-line-number="94"><span class="co">#&gt; Going to next comorbidity</span></a>
<a class="sourceLine" id="cb4-95" data-line-number="95"><span class="co">#&gt; cmb, j = 21</span></a>
<a class="sourceLine" id="cb4-96" data-line-number="96"><span class="co">#&gt; cmb, j = 22</span></a>
<a class="sourceLine" id="cb4-97" data-line-number="97"><span class="co">#&gt; cmb, j = 23</span></a>
<a class="sourceLine" id="cb4-98" data-line-number="98"><span class="co">#&gt; cmb, j = 24</span></a>
<a class="sourceLine" id="cb4-99" data-line-number="99"><span class="co">#&gt; cmb, j = 25</span></a>
<a class="sourceLine" id="cb4-100" data-line-number="100"><span class="co">#&gt; cmb, j = 26</span></a>
<a class="sourceLine" id="cb4-101" data-line-number="101"><span class="co">#&gt; cmb, j = 27</span></a>
<a class="sourceLine" id="cb4-102" data-line-number="102"><span class="co">#&gt; cmb, j = 28</span></a>
<a class="sourceLine" id="cb4-103" data-line-number="103"><span class="co">#&gt; cmb, j = 29</span></a>
<a class="sourceLine" id="cb4-104" data-line-number="104"><span class="co">#&gt; cmb, j = 30</span></a>
<a class="sourceLine" id="cb4-105" data-line-number="105"><span class="co">#&gt; finished a comorbidity</span></a>
<a class="sourceLine" id="cb4-106" data-line-number="106"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb4-107" data-line-number="107"><span class="co">#&gt; codes: C8228 M08979 </span></a>
<a class="sourceLine" id="cb4-108" data-line-number="108"><span class="co">#&gt; codeHash.keys(): C8228 M08979 </span></a>
<a class="sourceLine" id="cb4-109" data-line-number="109"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb4-110" data-line-number="110"><span class="co">#&gt; mat rows: 2, cols: 31</span></a>
<a class="sourceLine" id="cb4-111" data-line-number="111"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb4-112" data-line-number="112"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb4-113" data-line-number="113"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb4-114" data-line-number="114"><span class="co">#&gt; Map matrix rows: 2, and cols: 31</span></a>
<a class="sourceLine" id="cb4-115" data-line-number="115"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb4-116" data-line-number="116"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb4-117" data-line-number="117"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb4-118" data-line-number="118"><span class="co">#&gt; relevantSize = 2, vlen = 2</span></a>
<a class="sourceLine" id="cb4-119" data-line-number="119"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb4-120" data-line-number="120"><span class="co">#&gt; codes_cv: C8228 M08979 </span></a>
<a class="sourceLine" id="cb4-121" data-line-number="121"><span class="co">#&gt; relevantKeys: C8228 M08979 </span></a>
<a class="sourceLine" id="cb4-122" data-line-number="122"><span class="co">#&gt; rh.keys.size() = 2</span></a>
<a class="sourceLine" id="cb4-123" data-line-number="123"><span class="co">#&gt; visits are factors</span></a>
<a class="sourceLine" id="cb4-124" data-line-number="124"><span class="co">#&gt; rows: 1 1 </span></a>
<a class="sourceLine" id="cb4-125" data-line-number="125"><span class="co">#&gt; cols: 2 1 </span></a>
<a class="sourceLine" id="cb4-126" data-line-number="126"><span class="co">#&gt; n rows: 2, n cols: 2</span></a>
<a class="sourceLine" id="cb4-127" data-line-number="127"><span class="co">#&gt; Built visMt, rows:1, cols: 2</span></a>
<a class="sourceLine" id="cb4-128" data-line-number="128"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb4-129" data-line-number="129"><span class="co">#&gt; 1 1</span></a>
<a class="sourceLine" id="cb4-130" data-line-number="130"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb4-131" data-line-number="131"><span class="co">#&gt; Result rows: 1, cols: 31</span></a>
<a class="sourceLine" id="cb4-132" data-line-number="132"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb4-133" data-line-number="133"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb4-134" data-line-number="134"><span class="co">#&gt; Map matrix rows: 1, and cols: 31</span></a>
<a class="sourceLine" id="cb4-135" data-line-number="135"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb4-136" data-line-number="136"><span class="kw"><a href="../reference/van_walraven.html">van_walraven_from_comorbid</a></span>(both)</a>
<a class="sourceLine" id="cb4-137" data-line-number="137"><span class="co">#&gt; A </span></a>
<a class="sourceLine" id="cb4-138" data-line-number="138"><span class="co">#&gt; 9</span></a></code></pre></div>
<p>More commonly, some patients before a certain date will have ICD-9 codes, and others will have ICD-10 codes:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">icd9 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">pts =</span> <span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"A"</span>), <span class="kw">c</span>(<span class="st">"041.04"</span>, <span class="st">"244.9"</span>))</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">icd10 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">pts =</span> <span class="kw">c</span>(<span class="st">"B"</span>, <span class="st">"B"</span>), <span class="kw">c</span>(<span class="st">"C82.28"</span>, <span class="st">"M08.979"</span>))</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">both &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw"><a href="../reference/comorbid.html">comorbid_elix</a></span>(icd9), <span class="kw"><a href="../reference/comorbid.html">comorbid_elix</a></span>(icd10))</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; codes: 04104 2449 </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; codeHash.keys(): 2449 04104 </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; mat rows: 1, cols: 31</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; Map matrix rows: 1, and cols: 31</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; relevantSize = 1, vlen = 2</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt; codes_cv: 04104 2449 </span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt; relevantKeys: 2449 </span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt; rh.keys.size() = 1</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt; visits are factors</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt; rows: 1 1 </span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt; cols: -2147483648 1 </span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; n rows: 2, n cols: 2</span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt; Built visMt, rows:1, cols: 1</span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">#&gt; 1</span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="co">#&gt; Result rows: 1, cols: 31</span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31"><span class="co">#&gt; Map matrix rows: 1, and cols: 31</span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="co">#&gt; icd_codes: C8228 M08979 </span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"><span class="co">#&gt; i = 0, and ptCode = C8228</span></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"><span class="co">#&gt; code len &gt;=3 chars</span></a>
<a class="sourceLine" id="cb5-36" data-line-number="36"><span class="co">#&gt; cmb, j = 0</span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37"><span class="co">#&gt; cmb, j = 1</span></a>
<a class="sourceLine" id="cb5-38" data-line-number="38"><span class="co">#&gt; cmb, j = 2</span></a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="co">#&gt; cmb, j = 3</span></a>
<a class="sourceLine" id="cb5-40" data-line-number="40"><span class="co">#&gt; cmb, j = 4</span></a>
<a class="sourceLine" id="cb5-41" data-line-number="41"><span class="co">#&gt; cmb, j = 5</span></a>
<a class="sourceLine" id="cb5-42" data-line-number="42"><span class="co">#&gt; cmb, j = 6</span></a>
<a class="sourceLine" id="cb5-43" data-line-number="43"><span class="co">#&gt; cmb, j = 7</span></a>
<a class="sourceLine" id="cb5-44" data-line-number="44"><span class="co">#&gt; cmb, j = 8</span></a>
<a class="sourceLine" id="cb5-45" data-line-number="45"><span class="co">#&gt; cmb, j = 9</span></a>
<a class="sourceLine" id="cb5-46" data-line-number="46"><span class="co">#&gt; cmb, j = 10</span></a>
<a class="sourceLine" id="cb5-47" data-line-number="47"><span class="co">#&gt; cmb, j = 11</span></a>
<a class="sourceLine" id="cb5-48" data-line-number="48"><span class="co">#&gt; cmb, j = 12</span></a>
<a class="sourceLine" id="cb5-49" data-line-number="49"><span class="co">#&gt; cmb, j = 13</span></a>
<a class="sourceLine" id="cb5-50" data-line-number="50"><span class="co">#&gt; cmb, j = 14</span></a>
<a class="sourceLine" id="cb5-51" data-line-number="51"><span class="co">#&gt; cmb, j = 15</span></a>
<a class="sourceLine" id="cb5-52" data-line-number="52"><span class="co">#&gt; cmb, j = 16</span></a>
<a class="sourceLine" id="cb5-53" data-line-number="53"><span class="co">#&gt; cmb, j = 17</span></a>
<a class="sourceLine" id="cb5-54" data-line-number="54"><span class="co">#&gt; searchLen = 3</span></a>
<a class="sourceLine" id="cb5-55" data-line-number="55"><span class="co">#&gt; Going to next comorbidity</span></a>
<a class="sourceLine" id="cb5-56" data-line-number="56"><span class="co">#&gt; cmb, j = 18</span></a>
<a class="sourceLine" id="cb5-57" data-line-number="57"><span class="co">#&gt; cmb, j = 19</span></a>
<a class="sourceLine" id="cb5-58" data-line-number="58"><span class="co">#&gt; cmb, j = 20</span></a>
<a class="sourceLine" id="cb5-59" data-line-number="59"><span class="co">#&gt; cmb, j = 21</span></a>
<a class="sourceLine" id="cb5-60" data-line-number="60"><span class="co">#&gt; cmb, j = 22</span></a>
<a class="sourceLine" id="cb5-61" data-line-number="61"><span class="co">#&gt; cmb, j = 23</span></a>
<a class="sourceLine" id="cb5-62" data-line-number="62"><span class="co">#&gt; cmb, j = 24</span></a>
<a class="sourceLine" id="cb5-63" data-line-number="63"><span class="co">#&gt; cmb, j = 25</span></a>
<a class="sourceLine" id="cb5-64" data-line-number="64"><span class="co">#&gt; cmb, j = 26</span></a>
<a class="sourceLine" id="cb5-65" data-line-number="65"><span class="co">#&gt; cmb, j = 27</span></a>
<a class="sourceLine" id="cb5-66" data-line-number="66"><span class="co">#&gt; cmb, j = 28</span></a>
<a class="sourceLine" id="cb5-67" data-line-number="67"><span class="co">#&gt; cmb, j = 29</span></a>
<a class="sourceLine" id="cb5-68" data-line-number="68"><span class="co">#&gt; cmb, j = 30</span></a>
<a class="sourceLine" id="cb5-69" data-line-number="69"><span class="co">#&gt; finished a comorbidity</span></a>
<a class="sourceLine" id="cb5-70" data-line-number="70"><span class="co">#&gt; i = 1, and ptCode = M08979</span></a>
<a class="sourceLine" id="cb5-71" data-line-number="71"><span class="co">#&gt; code len &gt;=3 chars</span></a>
<a class="sourceLine" id="cb5-72" data-line-number="72"><span class="co">#&gt; cmb, j = 0</span></a>
<a class="sourceLine" id="cb5-73" data-line-number="73"><span class="co">#&gt; cmb, j = 1</span></a>
<a class="sourceLine" id="cb5-74" data-line-number="74"><span class="co">#&gt; cmb, j = 2</span></a>
<a class="sourceLine" id="cb5-75" data-line-number="75"><span class="co">#&gt; cmb, j = 3</span></a>
<a class="sourceLine" id="cb5-76" data-line-number="76"><span class="co">#&gt; cmb, j = 4</span></a>
<a class="sourceLine" id="cb5-77" data-line-number="77"><span class="co">#&gt; cmb, j = 5</span></a>
<a class="sourceLine" id="cb5-78" data-line-number="78"><span class="co">#&gt; cmb, j = 6</span></a>
<a class="sourceLine" id="cb5-79" data-line-number="79"><span class="co">#&gt; cmb, j = 7</span></a>
<a class="sourceLine" id="cb5-80" data-line-number="80"><span class="co">#&gt; cmb, j = 8</span></a>
<a class="sourceLine" id="cb5-81" data-line-number="81"><span class="co">#&gt; cmb, j = 9</span></a>
<a class="sourceLine" id="cb5-82" data-line-number="82"><span class="co">#&gt; cmb, j = 10</span></a>
<a class="sourceLine" id="cb5-83" data-line-number="83"><span class="co">#&gt; cmb, j = 11</span></a>
<a class="sourceLine" id="cb5-84" data-line-number="84"><span class="co">#&gt; cmb, j = 12</span></a>
<a class="sourceLine" id="cb5-85" data-line-number="85"><span class="co">#&gt; cmb, j = 13</span></a>
<a class="sourceLine" id="cb5-86" data-line-number="86"><span class="co">#&gt; cmb, j = 14</span></a>
<a class="sourceLine" id="cb5-87" data-line-number="87"><span class="co">#&gt; cmb, j = 15</span></a>
<a class="sourceLine" id="cb5-88" data-line-number="88"><span class="co">#&gt; cmb, j = 16</span></a>
<a class="sourceLine" id="cb5-89" data-line-number="89"><span class="co">#&gt; cmb, j = 17</span></a>
<a class="sourceLine" id="cb5-90" data-line-number="90"><span class="co">#&gt; cmb, j = 18</span></a>
<a class="sourceLine" id="cb5-91" data-line-number="91"><span class="co">#&gt; cmb, j = 19</span></a>
<a class="sourceLine" id="cb5-92" data-line-number="92"><span class="co">#&gt; cmb, j = 20</span></a>
<a class="sourceLine" id="cb5-93" data-line-number="93"><span class="co">#&gt; searchLen = 3</span></a>
<a class="sourceLine" id="cb5-94" data-line-number="94"><span class="co">#&gt; Going to next comorbidity</span></a>
<a class="sourceLine" id="cb5-95" data-line-number="95"><span class="co">#&gt; cmb, j = 21</span></a>
<a class="sourceLine" id="cb5-96" data-line-number="96"><span class="co">#&gt; cmb, j = 22</span></a>
<a class="sourceLine" id="cb5-97" data-line-number="97"><span class="co">#&gt; cmb, j = 23</span></a>
<a class="sourceLine" id="cb5-98" data-line-number="98"><span class="co">#&gt; cmb, j = 24</span></a>
<a class="sourceLine" id="cb5-99" data-line-number="99"><span class="co">#&gt; cmb, j = 25</span></a>
<a class="sourceLine" id="cb5-100" data-line-number="100"><span class="co">#&gt; cmb, j = 26</span></a>
<a class="sourceLine" id="cb5-101" data-line-number="101"><span class="co">#&gt; cmb, j = 27</span></a>
<a class="sourceLine" id="cb5-102" data-line-number="102"><span class="co">#&gt; cmb, j = 28</span></a>
<a class="sourceLine" id="cb5-103" data-line-number="103"><span class="co">#&gt; cmb, j = 29</span></a>
<a class="sourceLine" id="cb5-104" data-line-number="104"><span class="co">#&gt; cmb, j = 30</span></a>
<a class="sourceLine" id="cb5-105" data-line-number="105"><span class="co">#&gt; finished a comorbidity</span></a>
<a class="sourceLine" id="cb5-106" data-line-number="106"><span class="co">#&gt; NOT starting Valgrind callgrind instrumentation, not linked</span></a>
<a class="sourceLine" id="cb5-107" data-line-number="107"><span class="co">#&gt; codes: C8228 M08979 </span></a>
<a class="sourceLine" id="cb5-108" data-line-number="108"><span class="co">#&gt; codeHash.keys(): C8228 M08979 </span></a>
<a class="sourceLine" id="cb5-109" data-line-number="109"><span class="co">#&gt; Map reduced. Initializing the Eigen matrix</span></a>
<a class="sourceLine" id="cb5-110" data-line-number="110"><span class="co">#&gt; mat rows: 2, cols: 31</span></a>
<a class="sourceLine" id="cb5-111" data-line-number="111"><span class="co">#&gt; mat: Map matrix:</span></a>
<a class="sourceLine" id="cb5-112" data-line-number="112"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb5-113" data-line-number="113"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb5-114" data-line-number="114"><span class="co">#&gt; Map matrix rows: 2, and cols: 31</span></a>
<a class="sourceLine" id="cb5-115" data-line-number="115"><span class="co">#&gt; map matrix built</span></a>
<a class="sourceLine" id="cb5-116" data-line-number="116"><span class="co">#&gt; *** building visMat ***</span></a>
<a class="sourceLine" id="cb5-117" data-line-number="117"><span class="co">#&gt; Setting levels</span></a>
<a class="sourceLine" id="cb5-118" data-line-number="118"><span class="co">#&gt; relevantSize = 2, vlen = 2</span></a>
<a class="sourceLine" id="cb5-119" data-line-number="119"><span class="co">#&gt; codes are still character...</span></a>
<a class="sourceLine" id="cb5-120" data-line-number="120"><span class="co">#&gt; codes_cv: C8228 M08979 </span></a>
<a class="sourceLine" id="cb5-121" data-line-number="121"><span class="co">#&gt; relevantKeys: C8228 M08979 </span></a>
<a class="sourceLine" id="cb5-122" data-line-number="122"><span class="co">#&gt; rh.keys.size() = 2</span></a>
<a class="sourceLine" id="cb5-123" data-line-number="123"><span class="co">#&gt; visits are factors</span></a>
<a class="sourceLine" id="cb5-124" data-line-number="124"><span class="co">#&gt; rows: 1 1 </span></a>
<a class="sourceLine" id="cb5-125" data-line-number="125"><span class="co">#&gt; cols: 2 1 </span></a>
<a class="sourceLine" id="cb5-126" data-line-number="126"><span class="co">#&gt; n rows: 2, n cols: 2</span></a>
<a class="sourceLine" id="cb5-127" data-line-number="127"><span class="co">#&gt; Built visMt, rows:1, cols: 2</span></a>
<a class="sourceLine" id="cb5-128" data-line-number="128"><span class="co">#&gt; visMat: converting visMat to dense for debugging only:</span></a>
<a class="sourceLine" id="cb5-129" data-line-number="129"><span class="co">#&gt; 1 1</span></a>
<a class="sourceLine" id="cb5-130" data-line-number="130"><span class="co">#&gt; built visit matrix</span></a>
<a class="sourceLine" id="cb5-131" data-line-number="131"><span class="co">#&gt; Result rows: 1, cols: 31</span></a>
<a class="sourceLine" id="cb5-132" data-line-number="132"><span class="co">#&gt; result: Map matrix:</span></a>
<a class="sourceLine" id="cb5-133" data-line-number="133"><span class="co">#&gt; 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb5-134" data-line-number="134"><span class="co">#&gt; Map matrix rows: 1, and cols: 31</span></a>
<a class="sourceLine" id="cb5-135" data-line-number="135"><span class="co">#&gt; NOT stopping Valgrind callgrind instrumentation, not linked.</span></a>
<a class="sourceLine" id="cb5-136" data-line-number="136"><span class="kw"><a href="../reference/van_walraven.html">van_walraven_from_comorbid</a></span>(both)</a>
<a class="sourceLine" id="cb5-137" data-line-number="137"><span class="co">#&gt; A B </span></a>
<a class="sourceLine" id="cb5-138" data-line-number="138"><span class="co">#&gt; 0 9</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#icd-code-scoring-systems">ICD code scoring systems</a></li>
      <li><a href="#vermont-example-data-charlson-scores">Vermont example data, Charlson scores</a></li>
      <li><a href="#vermont-example-data-van-walraven-scores">Vermont example data, Van Walraven scores</a></li>
      <li><a href="#working-with-mixed-icd-9-and-icd-10-codes">Working with mixed ICD-9 and ICD-10 codes</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jack O. Wasey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '797795ae271734faa8bc9b1f4aaae82b',
    indexName: 'icd',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
